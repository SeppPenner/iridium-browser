From 785768c13c648fe0b0a0796251be3d4278cd53c7 Mon Sep 17 00:00:00 2001
From: Joachim Bauch <bauch@struktur.de>
Date: Wed, 15 Apr 2015 15:19:21 +0200
Subject: [PATCH 34/57] plugin: do not load any system-provided plugins on
 Windows

---
 content/common/plugin_list_win.cc | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/content/common/plugin_list_win.cc b/content/common/plugin_list_win.cc
index 6c95a0d..f9e9fb8 100644
--- a/content/common/plugin_list_win.cc
+++ b/content/common/plugin_list_win.cc
@@ -313,6 +313,7 @@ void PluginList::GetPluginDirectories(
   // Load from the executable area
   GetExeDirectory(&dirs);
 
+#if 0 /* NOTE: Iridium is not to load any system-provided plugins */
   // Load Java
   GetJavaDirectory(&dirs);
 
@@ -325,6 +326,7 @@ void PluginList::GetPluginDirectories(
   GetAcrobatDirectory(&dirs);
   GetQuicktimeDirectory(&dirs);
   GetWindowsMediaDirectory(&dirs);
+#endif
 
   for (std::set<base::FilePath>::iterator i = dirs.begin(); i != dirs.end(); ++i)
     plugin_dirs->push_back(*i);
@@ -361,6 +363,7 @@ void PluginList::GetPluginPathsFromRegistry(
 
   std::set<base::FilePath> plugin_dirs;
 
+#if 0 /* NOTE: Iridium is not to load any system-provided plugins */
   // Search for plugins from HKCU and HKLM.  THis will only find plugins that
   // are correctly registered in the correct WOW64 registry hive.
   GetPluginsInRegistryDirectory(HKEY_CURRENT_USER,
@@ -371,6 +374,7 @@ void PluginList::GetPluginPathsFromRegistry(
                                 kRegistryMozillaPlugins,
                                 0,
                                 &plugin_dirs);
+#endif
 
   for (std::set<base::FilePath>::iterator i = plugin_dirs.begin();
        i != plugin_dirs.end(); ++i) {
-- 
2.4.3

