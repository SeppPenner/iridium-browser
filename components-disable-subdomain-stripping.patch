From 9948f99926e67681c4ba570f9e2c11560351ddf6 Mon Sep 17 00:00:00 2001
From: Jan Engelhardt <jengelh@inai.de>
Date: Fri, 9 Nov 2018 11:31:17 +0100
Subject: [PATCH 58/61] components: disable subdomain stripping

https://www.bleepingcomputer.com/news/security/chrome-69-shows-the-www-and-m-subdomains-again-but-it-s-only-temporary/
---
 components/omnibox/common/omnibox_features.cc | 12 ++----------
 1 file changed, 2 insertions(+), 10 deletions(-)

diff --git a/components/omnibox/common/omnibox_features.cc b/components/omnibox/common/omnibox_features.cc
index 90b2ff9621217..a3fd8fd067153 100644
--- a/components/omnibox/common/omnibox_features.cc
+++ b/components/omnibox/common/omnibox_features.cc
@@ -14,34 +14,26 @@ const base::Feature kHideFileUrlScheme {
   "OmniboxUIExperimentHideFileUrlScheme",
 // Android and iOS don't have the File security chip, and therefore still
 // need to show the file scheme.
-#if defined(OS_ANDROID) || defined(OS_IOS)
       base::FEATURE_DISABLED_BY_DEFAULT
-#else
-      base::FEATURE_ENABLED_BY_DEFAULT
-#endif
 };
 
 // Feature used to hide the scheme from steady state URLs displayed in the
 // toolbar. It is restored during editing.
 const base::Feature kHideSteadyStateUrlScheme{
     "OmniboxUIExperimentHideSteadyStateUrlScheme",
-    base::FEATURE_ENABLED_BY_DEFAULT};
+    base::FEATURE_DISABLED_BY_DEFAULT};
 
 // Feature used to hide trivial subdomains from steady state URLs displayed in
 // the toolbar. It is restored during editing.
 const base::Feature kHideSteadyStateUrlTrivialSubdomains{
     "OmniboxUIExperimentHideSteadyStateUrlTrivialSubdomains",
-    base::FEATURE_ENABLED_BY_DEFAULT};
+    base::FEATURE_DISABLED_BY_DEFAULT};
 
 // Feature used to hide the path, query and ref from steady state URLs
 // displayed in the toolbar. It is restored during editing.
 const base::Feature kHideSteadyStateUrlPathQueryAndRef {
   "OmniboxUIExperimentHideSteadyStateUrlPathQueryAndRef",
-#if defined(OS_IOS)
-      base::FEATURE_ENABLED_BY_DEFAULT
-#else
       base::FEATURE_DISABLED_BY_DEFAULT
-#endif
 };
 
 // Feature used to undo all omnibox elisions on a single click or focus action.
-- 
2.26.0

