From d66054b9671d4c1361fc9adf5457fa885a67ed3c Mon Sep 17 00:00:00 2001
From: Jan Engelhardt <jengelh@inai.de>
Date: Thu, 11 Sep 2014 16:37:32 +0200
Subject: [PATCH 11/58] autofill: disable autofill download manager

Disables the autofill download manager (trk:158).
---
 components/autofill/core/browser/autofill_download_manager.cc | 2 +-
 components/autofill/core/browser/autofill_manager.cc          | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/components/autofill/core/browser/autofill_download_manager.cc b/components/autofill/core/browser/autofill_download_manager.cc
index 8774234..36501b4 100644
--- a/components/autofill/core/browser/autofill_download_manager.cc
+++ b/components/autofill/core/browser/autofill_download_manager.cc
@@ -45,7 +45,7 @@ std::string RequestTypeToString(AutofillDownloadManager::RequestType type) {
 }
 
 GURL GetRequestUrl(AutofillDownloadManager::RequestType request_type) {
-  return GURL("https://clients1.google.com/tbproxy/af/" +
+  return GURL("trk:158:https://clients1.google.com/tbproxy/af/" +
               RequestTypeToString(request_type) + "?client=" + kClientName);
 }
 
diff --git a/components/autofill/core/browser/autofill_manager.cc b/components/autofill/core/browser/autofill_manager.cc
index 5df3ca1..c605377 100644
--- a/components/autofill/core/browser/autofill_manager.cc
+++ b/components/autofill/core/browser/autofill_manager.cc
@@ -151,10 +151,12 @@ AutofillManager::AutofillManager(
       external_delegate_(NULL),
       test_delegate_(NULL),
       weak_ptr_factory_(this) {
+#if 0
   if (enable_download_manager == ENABLE_AUTOFILL_DOWNLOAD_MANAGER) {
     download_manager_.reset(
         new AutofillDownloadManager(driver, client_->GetPrefs(), this));
   }
+#endif
 }
 
 AutofillManager::~AutofillManager() {}
-- 
2.4.3

