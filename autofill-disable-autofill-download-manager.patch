From 88bb98723fdd4fccb103e227c2529077450e7160 Mon Sep 17 00:00:00 2001
From: Jan Engelhardt <jengelh@inai.de>
Date: Thu, 11 Sep 2014 16:37:32 +0200
Subject: [PATCH 37/76] autofill: disable autofill download manager

Disables the autofill download manager (trk:158).
---
 components/autofill/core/browser/autofill_download_manager.cc | 2 +-
 components/autofill/core/browser/autofill_manager.cc          | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git components/autofill/core/browser/autofill_download_manager.cc components/autofill/core/browser/autofill_download_manager.cc
index 1fe15d7faebe2..abc5f453c43b5 100644
--- components/autofill/core/browser/autofill_download_manager.cc
+++ components/autofill/core/browser/autofill_download_manager.cc
@@ -97,7 +97,7 @@ const net::BackoffEntry::Policy kAutofillBackoffPolicy = {
 };
 
 const char kDefaultAutofillServerURL[] =
-    "https://content-autofill.googleapis.com/";
+    "trk:158:https://content-autofill.googleapis.com/";
 
 // The default number of days after which to reset the registry of autofill
 // events for which an upload has been sent.
diff --git components/autofill/core/browser/autofill_manager.cc components/autofill/core/browser/autofill_manager.cc
index 4e8321b85e329..cee10ff19a2b1 100644
--- components/autofill/core/browser/autofill_manager.cc
+++ components/autofill/core/browser/autofill_manager.cc
@@ -1645,11 +1645,13 @@ AutofillManager::AutofillManager(
                                     : std::make_unique<CreditCardAccessManager>(
                                           driver, client_, personal_data_,
                                           credit_card_form_event_logger_.get());
+#if 0
   if (enable_download_manager == ENABLE_AUTOFILL_DOWNLOAD_MANAGER) {
     version_info::Channel channel = client_->GetChannel();
     download_manager_.reset(new AutofillDownloadManager(
         driver, this, GetAPIKeyForUrl(channel), client_->GetLogManager()));
   }
+#endif
   CountryNames::SetLocaleString(app_locale_);
 }
 
-- 
2.29.1

