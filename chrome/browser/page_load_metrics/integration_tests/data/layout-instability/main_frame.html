<script>
  // This debugging statement is to help catch issues with tests failing due
  // to window sizes on different bots being different.
  console.log('Main Frame widthxheight = ', window.innerWidth, 'x', window.innerHeight);

  function resolveAfterIframeLoad(iframe) {
    return new Promise(resolve => {
      iframe.addEventListener('load', function() {
        return resolve(true);
      })
    })
  }

  const wait_for_iframe_load = async () => {
    let iframe = document.getElementById('i');
    if (iframe.contentWindow.document.readyState == 'complete') {
      return true;
    }
    await resolveAfterIframeLoad(iframe);
  }

</script>
<style>
  #i {
    border: 0;
    position: absolute;
    left: 0;
    top: 0;
    background-color: pink;
  }
</style>
<iframe id="i" width="400" height="300" src="sub_frame.html"></iframe>